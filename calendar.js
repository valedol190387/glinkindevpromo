// Данные модулей (копируем из главной страницы)
const moduleData = [
    {
        date: '2024-10-04',
        dateText: '4 октября, 12:00 (МСК)',
        title: 'Селезёнка',
        subtitle: 'Мать всех органов',
        description: `В древней восточной медицине селезёнка считается главным органом, который отвечает за то, как мы получаем энергию из пищи и как эта энергия питает всё тело.

Западная наука подтверждает: селезёнка участвует в иммунной системе и кроветворении. Когда селезёнка сильная — у нас достаточно сил, хорошее пищеварение, ясная голова и стабильное настроение.

<strong>Симптомы слабой селезёнки:</strong>
• Постоянная усталость, даже после сна
• Тяжесть после еды, вздутие живота
• Склонность к жидкому стулу или диарее
• Отёки и чувство «воды в теле»
• Снижение мышечного тонуса
• Снижение концентрации, тревожность
• Синяки и кровоточивость
• Холодные руки и ноги

<strong>Селезёнка влияет на:</strong>
• Энергию — извлекает энергию из пищи
• Кровь и сосуды — предотвращает кровотечения
• Иммунитет — защищает от вирусов и бактерий
• Пищеварение — поддерживает ЖКТ
• Эмоции — помогает «переваривать» мысли

<strong>Зачем восстанавливать селезёнку:</strong>
Потому что именно с неё начинается баланс всей системы пищеварения и энергия жизни. Восстановив селезёнку, вы почувствуете: лёгкость после еды, прилив сил, ясность ума, стабильное настроение и крепкий иммунитет.`,
        price: '16 900 ₽',
        image: 'images/1.webp'
    },
    {
        date: '2024-10-11',
        dateText: '11 октября, 12:00 (МСК)',
        title: 'Желудок',
        subtitle: 'Ворота энергии',
        description: `Мы часто думаем: желудок — это просто орган, куда «падает» еда. Но и древняя восточная медицина, и современная наука говорят одно и то же: желудок — это ворота, через которые в организм входит энергия в виде пищи.

Если желудок ослаблен, то даже самая полезная еда не усвоится правильно. В итоге тело не получает ресурс, а вы чувствуете:
• Усталость после еды, вместо энергии
• Тяжесть и вздутие
• Изжогу, отрыжку, кислый привкус во рту
• Тошноту при волнении или стрессах
• Ломкость ногтей и выпадение волос
• Проблемы с кожей (акне, сухость, серый цвет лица)

<strong>Почему важно заботиться о желудке</strong>
Восточная медицина называет желудок «морем пищи и воды» — именно здесь начинается процесс превращения еды в энергию (Ци).

Современная медицина подтверждает: желудок отвечает за переваривание белков, выработку ферментов, усвоение железа, витамина С, витамина B12, йода и защиту от бактерий.

<strong>Чем грозит игнорирование проблем</strong>
• Хроническая усталость и сонливость
• Анемия, дефицит B12 и железа
• Ломкость костей и зубов
• Слабый иммунитет и частые болезни
• Нарушения цикла у женщин
• Риск язвы и гастрита

<strong>Зачем восстанавливать желудок</strong>
Когда желудок в балансе, вы чувствуете: лёгкость после еды, прилив энергии и ясность ума, красивые волосы, ногти, кожу, спокойное пищеварение и крепкий иммунитет.

Желудок — это не просто про еду. Это про качество вашей жизни.`,
        price: '16 900 ₽',
        image: 'images/2.webp'
    },
    {
        date: '2024-10-18',
        dateText: '18 октября, 12:00 (МСК)',
        title: 'Печень',
        subtitle: 'Главный фильтр и дирижёр гормонов',
        description: `Многие заблуждаются, что печень "накапливает в себе токсины". С точки зрения биохимии это совсем не так: печень отвечает за фазы детоксикации.

Но и древняя восточная медицина, и современная наука говорят: печень управляет всей системой — от гормонов и энергии до эмоций и внешности.

<strong>Симптомы нарушения работы печени</strong>
• Хроническая усталость и «нет сил»
• Горечь во рту, тяжесть справа под рёбрами
• Частые головные боли, особенно вечером
• Отёки, вздутие, тяжёлое пищеварение
• Пигментные пятна, тусклая кожа, ломкость волос
• Нарушения цикла, ПМС, болезненные месячные
• Эндометриоз, миомы, мастопатия
• Раздражительность, перепады настроения, вспышки гнева

<strong>Почему печень так важна</strong>
✔️ С точки зрения восточной медицины: печень управляет движением энергии (Ци), отвечает за хранение крови и питание организма, связана с эмоциями.

✔️ С точки зрения западной науки: печень выводит метаболиты токсичных веществ, лекарств, алкоголь; регулирует обмен жиров и глюкозы; перерабатывает гормоны (особенно эстрогены); участвует в синтезе белков, ферментов и витаминов.

<strong>Чем грозит игнорирование сигналов</strong>
• Гормональные сбои и тяжёлый ПМС
• Набор веса и отёки
• Хроническая усталость и «туман в голове»
• Преждевременное старение кожи
• Развитие жировой болезни печени, миом, эндометриоза

<strong>Зачем восстанавливать печень</strong>
Когда печень работает правильно, вы чувствуете: лёгкость в теле и ясность в голове, здоровую кожу и волосы, стабильный цикл и хорошее настроение, много энергии для жизни.

Печень — это не только про здоровье. Это про вашу молодость, красоту и гармонию.`,
        price: '16 900 ₽',
        image: 'images/3.webp'
    },
    {
        date: '2024-10-25',
        dateText: '25 октября, 12:00 (МСК)',
        title: 'Желчный пузырь',
        subtitle: 'Поток и движение',
        description: `Мы редко задумываемся о здоровье желчного пузыря, пока не появляются камни или боли - желчный уже рекомендуют удалить.

Но и восточная медицина, и современная наука говорят: желчный пузырь — это орган, который определяет, как вы перевариваете еду, усваиваете жиры, гормоны и даже как принимаете решения.

<strong>Симптомы нарушения оттока или структуры желчи</strong>
• Тяжесть и горечь во рту, особенно утром
• Вздутие, отрыжка, тошнота после жирной пищи
• Запоры или нестабильный стул
• Отёки и лишний вес, который «не уходит»
• Сероватая или тусклая кожа
• Выпадение волос, ломкие ногти
• Сильный ПМС, болезненные месячные
• Раздражительность, трудности с концентрацией
• Ощущение «застоя в жизни»

<strong>Почему желчный пузырь так важен</strong>
✔️ С точки зрения восточной медицины: отвечает за смелость и способность принимать решения. Его энергия связана с движением — и в теле, и в жизни.

✔️ С точки зрения западной науки: накапливает и выбрасывает желчь → без этого невозможно усваивать жиры, витамины A, D, E, K, омега-3 и гормоны. Плохой отток желчи = застой эстрогенов → миомы, эндометриоз. Желчь является натуральным антисептиком в организме.

<strong>Чем грозит игнорирование проблем</strong>
• Хроническое вздутие, тяжесть, боли после еды
• Постоянные отёки и «лишние килограммы»
• Выраженный ПМС, эндометриоз, миомы
• Камнеобразование, воспаление, удаление органа
• Преждевременное старение кожи, усталость, апатия

<strong>Что даёт восстановление</strong>
Лёгкость после еды, стабильное пищеварение, стройность и снижение отёков, чистая кожа, баланс гормонов, прилив энергии и ясность в голове, уверенность и внутреннюю смелость.

Желчный пузырь — это про движение. И в теле, и в жизни.`,
        price: '16 900 ₽',
        image: 'images/4.webp'
    },
    {
        date: '2024-11-01',
        dateText: '1 ноября, 12:00 (МСК)',
        title: 'Поджелудочная',
        subtitle: 'Баланс сахара и энергии',
        description: `Мы редко думаем о поджелудочной железе, пока не услышим диагноз «панкреатит» или «сахарный диабет».

Но на самом деле поджелудочная — это орган, который каждый день определяет, есть ли у вас энергия или организм будет тратить ресурс на борьбу с воспалением.

<strong>Симптомы нарушения работы</strong>
• Постоянная тяга к сладкому, кофе и перекусам
• Сонливость и упадок сил после еды
• Скачки настроения, раздражительность, тревожность
• Дрожь в теле и слабость, если долго не ели
• Набор веса в области живота, отёки, инсулинорезистентность
• Вздутие и тяжесть после еды
• Диарея, в частности на фоне употребления фруктов и сырых овощей

<strong>Почему поджелудочная так важна</strong>
✔️ С точки зрения восточной медицины: входит в систему Селезёнка/Желудок — это центр, который «добывает энергию из пищи». Дисбаланс проявляется через тревожность, зацикленность на мыслях, беспокойство.

✔️ С точки зрения западной науки: вырабатывает ферменты для переваривания белков, жиров и углеводов. Контролирует уровень глюкозы в крови с помощью инсулина и глюкагона. Перегрузка быстрыми углеводами ведёт к инсулинорезистентности → лишний вес, усталость, гормональные сбои.

<strong>Чем грозит игнорирование сигналов</strong>
• Хроническая усталость и невозможность концентрироваться
• Постоянный набор веса «в области живота»
• Инсулинорезистентность и диабет
• Панкреатит, боли и воспаления ЖКТ

<strong>Что даёт восстановление</strong>
Стабильная энергия весь день, лёгкое пищеварение без вздутий, снижение тяги к сладкому, стройность и баланс глюкозы в крови, ровное настроение и ясность ума, профилактика диабета.

Поджелудочная железа — это не только про пищеварение. Это про ваш баланс энергии, веса и стабильного эмоционального состояния.`,
        price: '16 900 ₽',
        image: 'images/5.webp'
    },
    {
        date: '2024-11-08',
        dateText: '8 ноября, 12:00 (МСК)',
        title: 'Кишечник',
        subtitle: 'Вторая вселенная внутри нас',
        description: `Мы привыкли думать, что кишечник — это просто про "болит живот" и вздутие. Но состояние кишечника определяет качество жизни.

В нём живут триллионы бактерий — микробиота. Они решают: есть ли у тебя энергия, как работает твой иммунитет, будет ли у тебя чистая кожа и нормальный вес, стабильны ли твои эмоции и сон.

<strong>Симптомы проблем с кишечником</strong>
• Вздутие, газообразование, тяжесть после еды
• Нестабильный стул (запоры, поносы или их чередование)
• Непереносимость некоторых продуктов
• Слабый иммунитет, частые простуды, аллергии
• Хронический синусит, тонзиллит
• Кожные проблемы: акне, сыпь, экзема, тусклый цвет лица
• Хроническая усталость и «туман в голове»
• Тревожность, перепады настроения, бессонница
• Аутоиммунные заболевания

<strong>Почему кишечник так важен</strong>
✔️ Взгляд восточной медицины: эмоции напрямую связаны с ЖКТ. Дисбаланс кишечника = тревога, раздражительность, навязчивые мысли.

✔️ Взгляд науки: 80% иммунных клеток живёт в кишечнике. 90% серотонина (гормона счастья) вырабатывается в кишечнике. Дисбиоз → воспаление → эстроген-доминирование, ПМС, эндометриоз, лишний вес. Кишечник напрямую влияет на мозг через ось «кишечник–мозг».

<strong>Что будет, если не заниматься кишечником</strong>
• Хроническая усталость, апатия, снижение концентрации
• Постоянные воспаления и частые болезни
• Проблемы с кожей и внешним видом
• Лишний вес, отёки, метаболические нарушения
• Риск аутоиммунных заболеваний, депрессии, гормональных проблем

<strong>Что даёт восстановление кишечника</strong>
Лёгкое и комфортное пищеварение, ровная кожа и сияющий внешний вид, крепкий иммунитет и меньше простуд, стабильная энергия и ясность ума, хорошее настроение и крепкий сон, стройность и баланс гормонов.

Кишечник — это про твою жизнь, красоту, счастье и долголетие.`,
        price: '16 900 ₽',
        image: 'images/6.webp'
    }
];

// Текущий месяц и год
let currentMonth = 9; // Октябрь (0-based)
let currentYear = 2024;
let selectedModuleIndex = null;

const monthNames = [
    'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',
    'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'
];

// Функция создания календаря
function generateCalendar(month, year) {
    const grid = document.getElementById('calendarGrid');
    const monthDisplay = document.getElementById('currentMonth');

    // Обновляем название месяца
    monthDisplay.textContent = monthNames[month];

    // Удаляем старые дни (оставляем только заголовки дней недели)
    const weekdays = grid.querySelectorAll('.weekday');
    grid.innerHTML = '';
    weekdays.forEach(day => grid.appendChild(day));

    // Получаем первый день месяца
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();

    // Получаем день недели первого дня (0 = воскресенье, нужно преобразовать к понедельнику = 0)
    let firstDayOfWeek = firstDay.getDay();
    firstDayOfWeek = firstDayOfWeek === 0 ? 6 : firstDayOfWeek - 1;

    // Добавляем пустые ячейки до первого дня
    for (let i = 0; i < firstDayOfWeek; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.classList.add('calendar-day', 'empty');
        grid.appendChild(emptyDay);
    }

    // Добавляем дни месяца
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const dayElement = document.createElement('div');
        dayElement.classList.add('calendar-day');
        dayElement.textContent = day;

        // Проверяем, есть ли событие в этот день
        const moduleIndex = moduleData.findIndex(m => m.date === dateStr);

        if (moduleIndex !== -1) {
            dayElement.classList.add('event');
            dayElement.addEventListener('click', () => showEventDetails(moduleIndex));
        } else if (day === 13 || day === 14 || day === 17 || day === 24) {
            // Примеры disabled дней
            dayElement.classList.add('disabled');
        } else {
            dayElement.classList.add('normal');
        }

        grid.appendChild(dayElement);
    }
}

// Показать детали события
function showEventDetails(index) {
    selectedModuleIndex = index;
    const module = moduleData[index];

    // Скрываем расписание, показываем детали
    document.getElementById('scheduleView').style.display = 'none';
    document.getElementById('eventView').style.display = 'block';

    // Заполняем данные
    document.getElementById('selectedEventTitle').textContent = module.title;
    document.getElementById('selectedEventSubtitle').textContent = module.subtitle;
    document.getElementById('selectedEventDate').textContent = module.dateText;
}

// Вернуться к расписанию
document.getElementById('backToSchedule').addEventListener('click', () => {
    document.getElementById('scheduleView').style.display = 'block';
    document.getElementById('eventView').style.display = 'none';
    selectedModuleIndex = null;
});

// Открыть модалку с подробностями
document.getElementById('openModuleModal').addEventListener('click', () => {
    if (selectedModuleIndex !== null) {
        showModuleModal(moduleData[selectedModuleIndex]);
    }
});

// Клик по элементам расписания
document.querySelectorAll('.schedule-item').forEach(item => {
    item.addEventListener('click', () => {
        const index = parseInt(item.getAttribute('data-index'));
        showEventDetails(index);
    });
});

// Показать модальное окно модуля
function showModuleModal(data) {
    const modal = document.getElementById('moduleModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalSubtitle = document.getElementById('modalSubtitle');
    const modalDescription = document.getElementById('modalDescription');
    const modalPrice = document.getElementById('modalPrice');

    modalImage.src = data.image;
    modalImage.alt = data.title;
    modalTitle.textContent = data.title;
    modalSubtitle.textContent = data.subtitle;
    modalDescription.innerHTML = data.description;
    modalPrice.textContent = data.price;

    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

// Закрыть модальное окно
function closeModuleModal() {
    const modal = document.getElementById('moduleModal');
    modal.classList.remove('active');
    document.body.style.overflow = '';
}

// Навигация по месяцам
document.getElementById('prevMonth').addEventListener('click', () => {
    currentMonth--;
    if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
    }
    generateCalendar(currentMonth, currentYear);
});

document.getElementById('nextMonth').addEventListener('click', () => {
    currentMonth++;
    if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
    }
    generateCalendar(currentMonth, currentYear);
});

// Обработчики модального окна
const modalClose = document.querySelector('.modal-close');
const modalOverlay = document.querySelector('.modal-overlay');

modalClose.addEventListener('click', closeModuleModal);
modalOverlay.addEventListener('click', closeModuleModal);

// Initialize calendar
document.addEventListener('DOMContentLoaded', () => {
    generateCalendar(currentMonth, currentYear);
});

// Bottom Navigation
const navItems = document.querySelectorAll('.nav-item');

navItems.forEach(item => {
    item.addEventListener('click', () => {
        const page = item.getAttribute('data-page');

        // Update active state
        navItems.forEach(nav => nav.classList.remove('active'));
        item.classList.add('active');

        // Navigate to page
        switch(page) {
            case 'index':
                window.location.href = 'index.html';
                break;
            case 'calendar':
                // Already on calendar page
                break;
            case 'bonuses':
                window.location.href = 'bonuses.html';
                break;
            case 'products':
                window.location.href = 'products.html';
                break;
            case 'profile':
                window.location.href = 'profile.html';
                break;
        }
    });
});
